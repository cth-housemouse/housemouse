<polymer-element name="console-element">
	<template>
		<style type="text/css">

            .consoleBox {
                background-color: rgba(0,0,0,0.9);
                height: 70%;
                width: 70%;
                margin: 10% auto;
                overflow-y: auto;
                overflow-x: hidden;
                /*border: 2px outset grey;*/
                /*outline: 1px solid rgba(211,211,211,0.80);*/
                -webkit-box-shadow: 6px 6px 6px 0px rgba(50, 50, 50, 0.59);
                -moz-box-shadow:    6px 6px 6px 0px rgba(50, 50, 50, 0.59);
                 box-shadow:        6px 6px 6px 0px rgba(50, 50, 50, 0.59);

            }

			.consoleText {
                height:100%;
                width:100%;
                padding: 0 5px;
			    position: relative;
			    /*top: 50px;*/
			    color: #E0E0E0;
			    font-family: "Consolas";
                text-align: left;
			}
           
            div#consoleTextVote p:nth-child(21) {
                color: rgba(255,0,0,1);
            }

            div#consoleTextVote p:last-child {

                -webkit-animation-delay: 1.5s; /* Safari and Chrome */
                -moz-animation-delay: 1.5s;
                animation-delay: 1.5s;
                
                -webkit-animation-name: blinker;
                -webkit-animation-duration: 1s;
                -webkit-animation-timing-function: linear;
                -webkit-animation-iteration-count: infinite;

                -moz-animation-name: blinker;
                -moz-animation-duration: 1s;
                -moz-animation-timing-function: linear;
                -moz-animation-iteration-count: infinite;

                animation-name: blinker;
                animation-duration: 1s;
                animation-timing-function: linear;
                animation-iteration-count: infinite;
            }

                @-moz-keyframes blinker {  
                    0% { opacity: 1.0; }
                    20% {opacity: 0.0;}
                    70% { opacity: 0.0; }
                    90% { opacity: 1.0}
                    100% { opacity: 1.0; }
                }

                @-webkit-keyframes blinker {  
                     0% { opacity: 1.0; }
                    20% {opacity: 0.0;}
                    70% { opacity: 0.0; }
                    90% { opacity: 1.0}
                    100% { opacity: 1.0; }
                }

                @keyframes blinker {  
                    0% { opacity: 1.0; }
                    20% {opacity: 0.0;}
                    70% { opacity: 0.0; }
                    90% { opacity: 1.0}
                    100% { opacity: 1.0; }
                }
                            }
			
            p {
			    margin: 0;
			    padding: 10px;
			    font-size: 18px;
			    line-height: 18px;
			}

		</style>

	<div class="consoleBox">
        <div id="consoleTextVote" class="consoleText"></div>
	</div> 

	</template>
	<script>
    	Polymer('console-element', {
			toggle: function(){
  				this.checkingData();
			}, 
    		checkingData: function() {
            // The console function!

            var text = [
                "Open Facebook plug-in",
                "Login to Facebook....",
                "Facebook login succesful",
                "Connecting to Facebook",
                "Collecting data from Facebook",
                "Retrieving country information....",
                "Connecting to database",
                "Uploading choices....",
                "Upload Done",
                "Downloading all user choices",
                "Calculating choices....",
                "Generating SVG map....",
                "Map Done",
                "Show choice of house for each country",
                "Retrieving concept choices...",
                "Generating keywords for government database from concept choices",
                "Connecting to govermental database",
                "Submitting concept choices",
                "Retrieving results from keywords....",
                "Downloading metadata",
                "ERROR - Missing script to calculate broken links",
                "Compensating with rough estimation",
                "Done",
                "Generating bar chart",
                "Bar chart Done",
                "_"
            ];



            var i = 0;
            var newTop = 82;

            var shadowRootFixConsole = this.shadowRoot;

            function addConsoleTag() {
                // making room for new value
                // newTop = newTop - 32;
                // var newTopPx = newTop + "px";
                // shadowRootFixConsole.querySelector('#consoleTextVote').style.top = newTopPx;

                // adding the new one
                var addition = "<p style=\"margin: 0 ;\">" + text[i] + "</p>";
                shadowRootFixConsole.querySelector('#consoleTextVote').innerHTML += addition;

                // opening the other elements on last addition
                if (i== text.length - 1) {
                    window.shadowRootFix.querySelector('#collapseMap').toggle();
                    window.shadowRootFix.querySelector('#collapseStats').toggle();
                };

                // making the timer a bit more random
                function getRandomInt(min, max) {
                  return Math.floor(Math.random() * (max - min)) + min;
                };

                var randomTime = getRandomInt(100, 1500);

                // looping for the next call for this function.
                i++;
                if (i < text.length) {
                    setTimeout(addConsoleTag, randomTime);
                };

            };

            addConsoleTag();
        }
    	});	
    </script>

</polymer-element>		