<polymer-element name="single-house" attributes="image houseType">
  <template>
    <style>

      :host {
        display: inline-block;
        width: 20%;
        margin: 0 3%;
      }

      img {
        width: 100%;
        height: auto;
        float: left;
        -webkit-transition-property: -webkit-transform;
        -webkit-transition-duration: 1s;
        -moz-transition-property: -moz-transform;
        -moz-transition-duration: 1s;
        cursor:pointer;
      }

      img:hover {
        -webkit-animation-name: pulse;
        -moz-animation-name: pulse;
        -webkit-animation-duration: 1.5s;
        -moz-animation-duration: 1.5s;
        -webkit-animation-iteration-count: infinite;
        -moz-animation-iteration-count: infinite;
        -webkit-animation-timing-function: linear;
        -moz-animation-timing-function: linear;
      }

      @-webkit-keyframes pulse {    
          0 {
              -webkit-transform: scale(1);
              transform: scale(1);
          }

          50% {
              -webkit-transform: scale(1.1);
              transform: scale(1.1);
          }

          100% {
              -webkit-transform: scale(1);
              transform: scale(1);
          }
      }

      @-moz-keyframes pulse {    
          0 {
              -moz-transform: scale(1);
              transform: scale(1);
          }

          50% {
              -moz-transform: scale(1.1);
              transform: scale(1.1);
          }

          100% {
              -moz-transform: scale(1);
              transform: scale(1);
          }
      }

      .imgHouseChosen {
        border-radius: 50%;
        -webkit-box-shadow: 0px 0px 0px 5px rgba(0,0,0,1);
        -moz-box-shadow: 0px 0px 0px 5px rgba(0,0,0,1);
        box-shadow: 0px 0px 0px 5px rgba(0,0,0,1);
      }

    </style>

    <!-- <img id="highlightHouse" on-click="{{ setType }}" src="{{image.imageUrl}}"> -->
    <img id="highlightHouse" src="{{image.imageUrl}}">

  </template>

  <script>
    Polymer('single-house', {
      houseType: "",
      ready: function() {
        // Nice scope issue's here with eventListener, targetting from up top is really brittle (no names may change). Can't do an easy self = this. Also can't attach to the window directly, creates a problem with read-only variables. 

        var self = this;

        console.log('im "self" inside setType');
        console.log(self);

        elem = this.shadowRoot.getElementById('highlightHouse');
        elem.addEventListener("click", setType, false);
        console.log('eventtigger Houses set!');

        function setType() {

        console.log('im "self" inside setType');
        console.log(self);

        self.houseType = self.image.type;

        console.log('set housetype CALLED');
        };

      },
      houseTypeChanged: function (){
        if (this.houseType == this.image.type) {
          this.shadowRoot.getElementById('highlightHouse').classList.add('imgHouseChosen');
        } else { 
          this.shadowRoot.getElementById('highlightHouse').classList.remove('imgHouseChosen');
        }  
      }
    });
  </script>
</polymer-element>